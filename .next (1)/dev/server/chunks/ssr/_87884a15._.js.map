{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/damia/My%20Drive/Consultorias/All%20Boys/gestion-basket-app/src/app/dashboard/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { signOut } from \"@/auth\";\r\n\r\nexport async function handleSignOut() {\r\n    await signOut();\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEO,eAAe;IAClB,MAAM,IAAA,sHAAO;AACjB;;;IAFsB;;AAAA,+OAAA"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/damia/My%20Drive/Consultorias/All%20Boys/gestion-basket-app/src/lib/utils.ts"],"sourcesContent":["export function getCategory(player: any, mappings?: { category: string, minYear: number, maxYear: number }[]): string {\r\n    // 1. Manual override priority\r\n    if (player.category) return player.category;\r\n\r\n    // 2. BirthDate logic\r\n    if (!player.birthDate) return \"REVISAR\";\r\n\r\n    const date = new Date(player.birthDate);\r\n    if (isNaN(date.getTime()) || date.getTime() <= 0) return \"REVISAR\";\r\n\r\n    const year = date.getFullYear();\r\n    if (year <= 1970) return \"REVISAR\";\r\n\r\n    if (mappings && mappings.length > 0) {\r\n        const found = mappings.find(m => year >= m.minYear && year <= m.maxYear);\r\n        if (found) return found.category;\r\n    }\r\n\r\n    const today = new Date();\r\n    const currentYear = today.getFullYear();\r\n    const age = currentYear - year;\r\n\r\n    if (age < 9) return \"Mosquitos\";\r\n    if (age <= 10) return \"Pre-Mini\";\r\n    if (age <= 12) return \"Mini\";\r\n    if (age <= 13) return \"U13\";\r\n    if (age <= 15) return \"U15\";\r\n    if (age <= 17) return \"U17\";\r\n    if (age <= 19) return \"U19\";\r\n    return \"Primera\";\r\n}\r\n\r\nexport function formatCurrency(amount: number) {\r\n    return new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' }).format(amount);\r\n}\r\n\r\n/**\r\n * Re-evaluates player status. \r\n * If status is REVISAR and all critical data is now present and real,\r\n * it returns ACTIVO. Otherwise returns the existing status.\r\n */\r\nexport function evaluatePlayerStatus(currentStatus: string, dni: string, birthDate: Date | null | string): string {\r\n    if (currentStatus !== 'REVISAR') return currentStatus;\r\n\r\n    if (!dni || dni.startsWith('TEMP-')) return 'REVISAR';\r\n\r\n    if (!birthDate) return 'REVISAR';\r\n    const date = birthDate instanceof Date ? birthDate : new Date(birthDate);\r\n    if (isNaN(date.getTime())) return 'REVISAR';\r\n\r\n    const year = date.getFullYear();\r\n    // Default/Legacy invalid years\r\n    if (year <= 1970 || year === 1900) return 'REVISAR';\r\n\r\n    // If we are here, data is real and complete. Auto-promote to ACTIVO.\r\n    return 'ACTIVO';\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAO,SAAS,YAAY,MAAW,EAAE,QAAmE;IACxG,8BAA8B;IAC9B,IAAI,OAAO,QAAQ,EAAE,OAAO,OAAO,QAAQ;IAE3C,qBAAqB;IACrB,IAAI,CAAC,OAAO,SAAS,EAAE,OAAO;IAE9B,MAAM,OAAO,IAAI,KAAK,OAAO,SAAS;IACtC,IAAI,MAAM,KAAK,OAAO,OAAO,KAAK,OAAO,MAAM,GAAG,OAAO;IAEzD,MAAM,OAAO,KAAK,WAAW;IAC7B,IAAI,QAAQ,MAAM,OAAO;IAEzB,IAAI,YAAY,SAAS,MAAM,GAAG,GAAG;QACjC,MAAM,QAAQ,SAAS,IAAI,CAAC,CAAA,IAAK,QAAQ,EAAE,OAAO,IAAI,QAAQ,EAAE,OAAO;QACvE,IAAI,OAAO,OAAO,MAAM,QAAQ;IACpC;IAEA,MAAM,QAAQ,IAAI;IAClB,MAAM,cAAc,MAAM,WAAW;IACrC,MAAM,MAAM,cAAc;IAE1B,IAAI,MAAM,GAAG,OAAO;IACpB,IAAI,OAAO,IAAI,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO;IACtB,OAAO;AACX;AAEO,SAAS,eAAe,MAAc;IACzC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM,GAAG,MAAM,CAAC;AACzF;AAOO,SAAS,qBAAqB,aAAqB,EAAE,GAAW,EAAE,SAA+B;IACpG,IAAI,kBAAkB,WAAW,OAAO;IAExC,IAAI,CAAC,OAAO,IAAI,UAAU,CAAC,UAAU,OAAO;IAE5C,IAAI,CAAC,WAAW,OAAO;IACvB,MAAM,OAAO,qBAAqB,OAAO,YAAY,IAAI,KAAK;IAC9D,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;IAElC,MAAM,OAAO,KAAK,WAAW;IAC7B,+BAA+B;IAC/B,IAAI,QAAQ,QAAQ,SAAS,MAAM,OAAO;IAE1C,qEAAqE;IACrE,OAAO;AACX"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/damia/My%20Drive/Consultorias/All%20Boys/gestion-basket-app/src/lib/bulk-actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { evaluatePlayerStatus } from \"./utils\";\r\n\r\nexport async function bulkUpdatePlayers(\r\n    playerIds: string[],\r\n    updates: {\r\n        category?: string | null,\r\n        tira?: string,\r\n        status?: string,\r\n        scholarship?: boolean,\r\n        playsPrimera?: boolean,\r\n        observations?: string | null\r\n    }\r\n) {\r\n    if (!playerIds.length) return { success: false, message: \"No se seleccionaron jugadores\" };\r\n\r\n    try {\r\n        // We fetch players to evaluate status correctly for each\r\n        const players = await prisma.player.findMany({\r\n            where: { id: { in: playerIds } },\r\n            select: { id: true, status: true, dni: true, birthDate: true }\r\n        });\r\n\r\n        for (const player of players) {\r\n            const newStatus = updates.status || player.status;\r\n            const finalStatus = evaluatePlayerStatus(newStatus, player.dni, player.birthDate);\r\n\r\n            await prisma.player.update({\r\n                where: { id: player.id },\r\n                data: {\r\n                    ...updates,\r\n                    status: finalStatus\r\n                }\r\n            });\r\n        }\r\n\r\n        revalidatePath(\"/dashboard/players\");\r\n        revalidatePath(\"/dashboard/categories\");\r\n        return { success: true, message: `Se actualizaron ${playerIds.length} jugadores.` };\r\n    } catch (error: any) {\r\n        return { success: false, message: \"Error en actualizaciÃ³n masiva: \" + error.message };\r\n    }\r\n}\r\n\r\n\r\nexport async function bulkDeletePlayers(playerIds: string[]) {\r\n    if (!playerIds.length) return { success: false, message: \"No se seleccionaron jugadores\" };\r\n\r\n    try {\r\n        // Warning: This is destructive. Admin only check should be at route level.\r\n        await prisma.player.deleteMany({\r\n            where: {\r\n                id: { in: playerIds }\r\n            }\r\n        });\r\n\r\n        revalidatePath(\"/dashboard/players\");\r\n        return { success: true, message: `Se eliminaron ${playerIds.length} jugadores.` };\r\n    } catch (error: any) {\r\n        return { success: false, message: \"Error al eliminar jugadores: \" + error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe,kBAClB,SAAmB,EACnB,OAOC;IAED,IAAI,CAAC,UAAU,MAAM,EAAE,OAAO;QAAE,SAAS;QAAO,SAAS;IAAgC;IAEzF,IAAI;QACA,yDAAyD;QACzD,MAAM,UAAU,MAAM,8HAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzC,OAAO;gBAAE,IAAI;oBAAE,IAAI;gBAAU;YAAE;YAC/B,QAAQ;gBAAE,IAAI;gBAAM,QAAQ;gBAAM,KAAK;gBAAM,WAAW;YAAK;QACjE;QAEA,KAAK,MAAM,UAAU,QAAS;YAC1B,MAAM,YAAY,QAAQ,MAAM,IAAI,OAAO,MAAM;YACjD,MAAM,cAAc,IAAA,2IAAoB,EAAC,WAAW,OAAO,GAAG,EAAE,OAAO,SAAS;YAEhF,MAAM,8HAAM,CAAC,MAAM,CAAC,MAAM,CAAC;gBACvB,OAAO;oBAAE,IAAI,OAAO,EAAE;gBAAC;gBACvB,MAAM;oBACF,GAAG,OAAO;oBACV,QAAQ;gBACZ;YACJ;QACJ;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;YAAM,SAAS,CAAC,gBAAgB,EAAE,UAAU,MAAM,CAAC,WAAW,CAAC;QAAC;IACtF,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,SAAS;YAAO,SAAS,oCAAoC,MAAM,OAAO;QAAC;IACxF;AACJ;AAGO,eAAe,kBAAkB,SAAmB;IACvD,IAAI,CAAC,UAAU,MAAM,EAAE,OAAO;QAAE,SAAS;QAAO,SAAS;IAAgC;IAEzF,IAAI;QACA,2EAA2E;QAC3E,MAAM,8HAAM,CAAC,MAAM,CAAC,UAAU,CAAC;YAC3B,OAAO;gBACH,IAAI;oBAAE,IAAI;gBAAU;YACxB;QACJ;QAEA,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;YAAM,SAAS,CAAC,cAAc,EAAE,UAAU,MAAM,CAAC,WAAW,CAAC;QAAC;IACpF,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,SAAS;YAAO,SAAS,kCAAkC,MAAM,OAAO;QAAC;IACtF;AACJ;;;IA1DsB;IA0CA;;AA1CA,+OAAA;AA0CA,+OAAA"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/damia/My%20Drive/Consultorias/All%20Boys/gestion-basket-app/.next-internal/server/app/dashboard/players/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getAllRolePermissions as '00389c4dee762c9752fa78abeb9062f32a2bc77388'} from 'ACTIONS_MODULE0'\nexport {getPermissionsForRole as '405b1fff19e2829eba6c9bf3e477254b7973b8a323'} from 'ACTIONS_MODULE0'\nexport {hasPermission as '6028f758cf28d192fd5c86810b2b38b40bb85b5b68'} from 'ACTIONS_MODULE0'\nexport {updateRolePermission as '70b175dc5144eb864d129ad1d180d711c56c75c19e'} from 'ACTIONS_MODULE0'\nexport {handleSignOut as '00172bdecf9bdacb64dd4c5180e9c8675d7b15d573'} from 'ACTIONS_MODULE1'\nexport {bulkUpdatePlayers as '605e77fa7193052f6437ee7c223289f1becabdea3e'} from 'ACTIONS_MODULE2'\nexport {bulkDeletePlayers as '40a92a4d675b3b4d51ffbb58ef8a32e71f9d6f0ae5'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAIA;AACA"}}]
}